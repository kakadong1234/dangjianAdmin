<!DOCTYPE html>
<html>

<head>

    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <title>六盘水党建云</title>

    <link href="../css/bootstrap.min.css" rel="stylesheet">
    <link href="../font-awesome/css/font-awesome.css" rel="stylesheet">
    <link href="../css/plugins/iCheck/custom.css" rel="stylesheet">
    <link href="../css/animate.css" rel="stylesheet">
    <link href="../css/style.css" rel="stylesheet">
    <script src="../js/angularjs/angular.min.js"></script>

</head>

<body ng-app="myApp" ng-controller="myCtrl"  data-ng-init="load()">

<div id="wrapper">

    <nav class="navbar-default navbar-static-side" role="navigation">
        <div class="sidebar-collapse">
            <ul class="nav metismenu" id="side-menu">
                <li class="nav-header">
                    <div class="dropdown profile-element">
                        <h3 style="color: white;font-size: 22px">
                            <img src="img/login.png" style="width: 50px;height: auto">
                            六盘水党建云
                        </h3>
                    </div>
                    <div class="logo-element">
                        党建云
                    </div>
                </li>
                <li>
                    <a href="article_home.html" target="_self"><i class="fa fa-th-large"></i> <span class="nav-label">网上讲习所</span><span class="fa arrow"></span></a>
                    <ul class="nav nav-second-level collapse">
                        <li class="active"><a href="article_home.html" target="_self">文章发布</a></li>
                        <li><a href="article_type.html" target="_self">文章类型</a></li>
                        <!--<li><a href="article_comment.html" target="_self">评论管理</a></li>-->
                    </ul>
                </li>
                <li>
                    <a href="village_home.html" target="_self"><i class="fa fa-th-large"></i> <span class="nav-label">党建大数据</span><span class="fa arrow"></span></a>
                    <ul class="nav nav-second-level collapse">
                        <li><a href="village_home.html" target="_self">党支部管理</a></li>
                        <li><a href="ganbu_manage.html" target="_self">驻村干部管理</a></li>
                        <li><a href="flags_piao.html" target="_self">党建地图</a></li>
                    </ul>
                </li>

                <!-- <li>
                    <a href="flags_piao.html" target="_self"><i class="fa fa-diamond"></i> <span class="nav-label">党建地图</span></a>
                </li> -->

                <!--<li>-->
                <!--<a href="news_manage.html" target="_self"><i class="fa fa-diamond"></i> <span class="nav-label">党建新闻管理</span></a>-->
                <!--</li>-->
                <!--<li>-->
                    <!--<a href="three_sessions.html" target="_self"><i class="fa fa-diamond"></i> <span class="nav-label">三会一课</span></a>-->
                <!--</li>-->
                <li>
                    <a href="table_data_tables.html#" target="_self"><i class="fa fa-bar-chart-o"></i> <span class="nav-label">云学习中心</span><span class="fa arrow"></span></a>
                    <ul class="nav nav-second-level collapse">
                        <!-- <li><a href="graph_flot.html" target="_self">教学资源</a></li> -->
                        <li><a href="examination_paper_list.html" target="_self">考试管理</a></li>
                        <li><a href="test_manage.html" target="_self">考试题管理</a></li>
                        <li><a href="study_credit_list.html" target="_self">在线学习学分配置</a></li>
                        <!-- <li><a href="graph_chartjs.html" target="_self">活动开展情况</a></li> -->
                    </ul>
                </li>

                <li class="active">
                    <a href="user_list.html#" target="_self"><i class="fa fa-bar-chart-o"></i> <span class="nav-label">系统设置</span><span class="fa arrow"></span></a>
                    <ul class="nav nav-second-level collapse">
                        <li><a href="user_list.html" target="_self">用户管理</a></li>
                        <li class="active"><a href="role_list.html" target="_self">角色管理</a></li>
                    </ul>
                </li>

                <!--<li>-->
                <!--<a href="#" target="_self"><i class="fa fa-wrench"></i> <span class="nav-label">系统管理</span><span class="fa arrow"></span></a>-->
                <!--<ul class="nav nav-second-level collapse" >-->
                <!--<li><a href="#" target="_self">系统配置</a></li>-->
                <!--<li><a href="#" target="_self">权限管理</a></li>-->
                <!--<li><a href="login.html" target="_self">退出</a></li>-->
                <!--</ul>-->
                <!--</li>-->

            </ul>

        </div>
    </nav>

    <div id="page-wrapper" class="gray-bg">
        <div class="row border-bottom">
            <nav class="navbar navbar-static-top" role="navigation" style="margin-bottom: 0">
                <div class="navbar-header">
                    <a class="navbar-minimalize minimalize-styl-2 btn btn-primary " href="ganbu_manage.html"><i class="fa fa-bars"></i> </a>
                    <form role="search" class="navbar-form-custom" action="#">
                        <div class="form-group">
                            <input type="text"  class="form-control" name="top-search" id="top-search">
                        </div>
                    </form>
                </div>
            </nav>
        </div>

        <div class="wrapper wrapper-content animated fadeInRight">
            <div class="row">
                <div class="col-lg-12">
                    <div class="ibox float-e-margins">
                        <div class="ibox-title">
                            <h5>角色管理</h5>
                            <div class="ibox-tools">
                                <a class="collapse-link" title="新增" data-toggle="modal" data-target="#myModal1"><i class="fa fa-pencil"></i></a>
                            </div>
                        </div>
                        <div class="ibox-content">

                            <div  id="form1">
                                <div class="modal fade" id="myModal1" tabindex="-1" role="dialog" aria-labelledby="myModalLabel1">
                                    <div class="modal-dialog" role="document">
                                        <div class="modal-content">
                                            <div class="modal-header">
                                                <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                                                <h4 class="modal-title" id="myModalLabel1">新增角色</h4>
                                            </div>
                                            <div class="modal-body">
                                                <div class="form-container">
                                                    <div id="icon_validate" >
                    
                                                        <div class="row">
                                                            <div class="modal-body">
                                                                <div class="form-horizontal">
                                                                    <div class="form-group">
                                                                        <label class="col-xs-2 control-label">角色名称</label>
                                                                        <div class="col-xs-10">
                                                                            <input type="text" placeholder="角色名称" ng-model="role_name" class="form-control">
                                                                        </div>
                                                                    </div>
                                                            </div>
                                                            <div class="modal-footer" style="text-align: center">
                                                                <button type="submit"  class="btn btn-primary"  ng-click="addRole()">确认新建</button>
                                                            </div>
                    
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                    
                                        </div>
                                    </div>
                                </div>
                    
                            </div>

                            <form role="form"  id="form">
                                <div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
                                    <div class="modal-dialog" role="document">
                                        <div class="modal-content">
                                            <div class="modal-header">
                                                <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                                                <h4 class="modal-title" id="myModalLabel">为{{role_name}}选择权限</h4>
                                            </div>
                                            <div class="modal-body">
                                                <div class="form-container">
                                                    <form id="icon_validate">
                                                        <div class="row">
                                                            <div class="modal-body">
                                                                <div class="form-horizontal">
                                                                    <div class="form-group">
                                                                        <div class="col-md-12" >
                                                                            <ol>
                                                                                <li ng-repeat="x in menuList" style="font-weight: bold;font-size: 18px;">
                                                                                    <small>{{x.menu_name}}</small>
                                                                                    <input ng-if="!isSelected(x.menu_id)" type="checkbox" style="float: right;width: 16px;height: 16px;" value="{{x.menu_id}}"  ng-click="roleClick(x)" name="check2" >
                                                                                    <input ng-if="isSelected(x.menu_id)" checked type="checkbox" style="float: right;width: 16px;height: 16px;" value="{{x.menu_id}}"  ng-click="roleClick(x)" name="check2" >
                                                                                    
                                                                                    <ol ng-if="isHaveChirdNode(x)">
                                                                                        <li ng-repeat="y in x.nodes" style="font-weight: bold;font-size: 18px;">
                                                                                            <small>{{y.menu_name}}</small>
                                                                                            <input ng-if="!isSelected(y.menu_id)" type="checkbox" style="float: right;width: 16px;height: 16px;" value="{{y.menu_id}}"  ng-click="roleClick(y)" name="check2" >
                                                                                            <input ng-if="isSelected(y.menu_id)" checked type="checkbox" style="float: right;width: 16px;height: 16px;" value="{{y.menu_id}}"  ng-click="roleClick(y)" name="check2" >

                                                                                            <ol ng-if="isHaveChirdNode(y)">
                                                                                                <li ng-repeat="z in y.nodes" style="font-weight: bold;font-size: 18px;">
                                                                                                    <small>{{z.menu_name}}</small>
                                                                                                    <input ng-if="!isSelected(z.menu_id)" type="checkbox" style="float: right;width: 16px;height: 16px;" value="{{z.menu_id}}"  ng-click="roleClick(z)" name="check2" >
                                                                                                    <input ng-if="isSelected(z.menu_id)" checked type="checkbox" style="float: right;width: 16px;height: 16px;" value="{{z.menu_id}}"  ng-click="roleClick(z)" name="check2" >
                                                                                                </li> 
                                                                                            </ol>
                                                                                        </li>   
                                                                                    </ol>  
                                                                                </li>
                                                                            </ol>
                                                                        </div>
                                                                    </div>


                                                                </div>
                                                            </div>
                                                            <div class="modal-footer" style="text-align: center">
                                                                <button type="button" ng-click="roleChangeClick()" class="btn btn-primary" >确认</button>
                                                                <button type="button" ng-click="onCancel()" class="btn-white" >取消</button>
                                                            </div> 

                                                        </div>
                                                    </form>
                                                </div>
                                            </div>

                                        </div>
                                    </div>
                                </div>

                            </form>

                            <div class="table-responsive">
                                <div id="DataTables_Table_0_wrapper" class="dataTables_wrapper form-inline dt-bootstrap">


                                    <table class="table table-striped table-bordered table-hover dataTables-example dataTable" id="DataTables_Table_0" aria-describedby="DataTables_Table_0_info" role="grid">
                                        <thead>
                                        <tr role="row">
                                            <th class="sorting_asc" style="text-align: center">角色序号</th>
                                            <th class="sorting_asc" style="text-align: center">角色名称</th>
                                            <th  style="text-align: center">操作</th>
                                        </tr>
                                        </thead>
                                        <tbody>
                                        <tr class="gradeA odd" role="row" ng-repeat="x  in lists">
                                            <td style="text-align: center" ng-click="onClick(x.role_id)">{{x.role_id}}</td>
                                            <td style="text-align: center" ng-click="onClick(x.role_id)">{{x.role_name}}</td>
                                            <td style="text-align: center">
                                                <a title="设置权限" ng-click="setMenuClick(x.role_id, x.role_name)" style="margin-right: 12px;" data-toggle="modal" data-target="#myModal"><i class="fa fa-clipboard" ></i></a>
                                                <a title="删除" ng-click="delRole(x.role_id)" style="margin-right: 12px;"><i class="fa fa-trash" ></i></a>
                                            </td>
                                        </tr>
                                        </tbody>

                                    </table>

                                    <div class="dataTables_paginate paging_simple_numbers" id="DataTables_Table_0_paginate" style="float: right" ng-hide="pagesLists<=1">
                                        <ul class="pagination">
                                            <li class="paginate_button previous" id="DataTables_Table_0_previous">
                                                <a href="#" aria-controls="DataTables_Table_0" data-dt-idx="0" tabindex="0" ng-click="upOnClick()">上一页</a>
                                            </li>
                                            <li class="paginate_button active">
                                                <a href="#" aria-controls="DataTables_Table_0" data-dt-idx="1" tabindex="0">{{page}}/{{pagesLists}}</a>
                                            </li>
                                            <li class="paginate_button next" id="DataTables_Table_0_next">
                                                <a href="#" aria-controls="DataTables_Table_0" data-dt-idx="7" tabindex="0" ng-click="downOnClick()">下一页</a>
                                            </li>
                                        </ul>
                                    </div>



                                </div>
                            </div>

                        </div>
                    </div>
                </div>
            </div>

        </div>


    </div>


</div>
</div>



<!-- Mainly scripts -->
<script src="../js/jquery-2.1.1.js"></script>
<script src="../js/bootstrap.min.js"></script>
<script src="../js/plugins/metisMenu/jquery.metisMenu.js"></script>
<script src="../js/plugins/slimscroll/jquery.slimscroll.min.js"></script>

<!-- Peity -->
<script src="../js/plugins/peity/jquery.peity.min.js"></script>

<!-- Custom and plugin javascript -->
<script src="../js/inspinia.js"></script>
<script src="../js/plugins/pace/pace.min.js"></script>

<!-- iCheck -->
<script src="../js/plugins/iCheck/icheck.min.js"></script>

<!-- Peity -->
<script src="../js/demo/peity-demo.js"></script>
<script src="js/role_list.js"></script>

<script>
    $(document).ready(function(){
        $('.i-checks').iCheck({
            checkboxClass: 'icheckbox_square-green',
            radioClass: 'iradio_square-green',
        });
    });
</script>

</body>

</html>
